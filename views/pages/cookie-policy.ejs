<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= typeof title !== 'undefined' ? title + ' - ' : '' %>Minerva Metrics Hub</title>
  
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="/css/style.css">
  
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .text-gradient {
      background-image: linear-gradient(to right, #8b5cf6, #d946ef);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  
  <!-- Navigation -->
  <%- include('../partials/navbar') %>
  
  <!-- Flash Messages -->
  <%- include('../partials/flash') %>
  
  <!-- Main Content -->
  <main class="flex-grow">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="text-center mb-12">
        <h1 class="text-4xl font-extrabold text-gray-900 sm:text-5xl">
          <span class="text-gradient">Cookie Policy</span>
        </h1>
        <p class="mt-2 text-sm text-gray-500">
          Last Updated: December 1, 2025
        </p>
      </div>
    
      <div class="prose max-w-none text-gray-700">
        <p>
          This Cookie Policy explains what cookies are, how Minerva Metrics Hub ("we," "our," or "us") uses them, and your choices regarding their use.
        </p>
    
        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-4">1. What are Cookies?</h2>
        <p>
          Cookies are small pieces of text sent by your web browser by a website you visit. A cookie file is stored in your web browser and allows the Hub or a third-party to recognize you and make your next visit easier and the Hub more useful to you.
        </p>
    
        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-4">2. How Minerva Metrics Hub Uses Cookies</h2>
        <p>
          When you use and access the Hub, we may place a number of cookie files in your web browser.
        </p>
        <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Essential Cookies:</h3>
        <ul>
          <li>**Purpose:** These cookies are essential to provide you with services available through our Hub and to enable you to use some of its features, such as logging in and accessing secure areas.</li>
          <li>**Example:** Session cookies for user authentication.</li>
        </ul>
        <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Analytics Cookies:</h3>
        <ul>
          <li>**Purpose:** These cookies allow us to collect information about how visitors use the Hub, such as which pages they visit most often and if they get error messages from web pages. This helps us improve the way the Hub works.</li>
          <li>**Example:** Google Analytics (placeholder).</li>
        </ul>
    
        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-4">3. Your Choices Regarding Cookies</h2>
        <p>
          If you'd like to delete cookies or instruct your web browser to delete or refuse cookies, please visit the help pages of your web browser. Please note, however, that if you delete cookies or refuse to accept them, you might not be able to use all of the features we offer, you may not be able to store your preferences, and some of our pages might not display properly.
        </p>
    
        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-4">4. GDPR Compliance (Cookie Consent)</h2>
        <p>
          In compliance with GDPR and other privacy regulations, we use a cookie consent banner to obtain your explicit consent before setting non-essential cookies. By clicking "Accept" on the banner, you consent to the use of all cookies described in this policy.
        </p>
      </div>
    </div>
  </main>
  
  <!-- Footer -->
  <%- include('../partials/footer') %>

  <!-- GDPR Cookie Consent Banner -->
  <div id="cookie-banner" class="fixed bottom-0 left-0 right-0 bg-gray-900 text-white p-4 z-50 hidden">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <p class="text-sm">
        We use cookies to ensure you get the best experience on our Hub. By clicking "Accept," you agree to our <a href="/cookies" class="text-purple-400 hover:text-purple-300 underline">Cookie Policy</a>.
      </p>
      <div class="flex space-x-3">
        <button id="accept-cookies" class="bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium py-2 px-4 rounded-lg transition">
          Accept
        </button>
        <button id="decline-cookies" class="bg-gray-700 hover:bg-gray-600 text-white text-sm font-medium py-2 px-4 rounded-lg transition">
          Decline
        </button>
      </div>
    </div>
  </div>

  <script>
    // Cookie Banner Logic
    const cookieBanner = document.getElementById('cookie-banner');
    const acceptButton = document.getElementById('accept-cookies');
    const declineButton = document.getElementById('decline-cookies');

    function setCookie(name, value, days) {
      let expires = "";
      if (days) {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "")  + expires + "; path=/";
    }

    function getCookie(name) {
      const nameEQ = name + "=";
      const ca = document.cookie.split(';');
      for(let i=0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
      }
      return null;
    }

    if (!getCookie('cookie_consent')) {
      cookieBanner.classList.remove('hidden');
    }

    acceptButton.addEventListener('click', () => {
      setCookie('cookie_consent', 'accepted', 365);
      cookieBanner.classList.add('hidden');
    });

    declineButton.addEventListener('click', () => {
      setCookie('cookie_consent', 'declined', 365);
      cookieBanner.classList.add('hidden');
      // Optional: Add logic to disable non-essential scripts here
    });
  </script>
</body>
</html>
